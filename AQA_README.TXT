AQA_README.TXT - Расширенная документация по автоматизированному QA тестированию приложения AI.J.3.4

================================================================================
ОБЗОР ДОПОЛНИТЕЛЬНЫХ ТЕСТОВ
================================================================================

В дополнение к базовым юнит-тестам (tests/unit/test_app.py) были созданы расширенные
тесты для покрытия дополнительных аспектов качества ПО:

1. ТЕСТЫ ПРОИЗВОДИТЕЛЬНОСТИ (tests/performance/test_performance.py)
2. ИНТЕГРАЦИОННЫЕ ТЕСТЫ С РЕАЛЬНЫМ API (tests/integration/test_integration.py)
3. ТЕСТЫ ШАБЛОНОВ HTML (tests/unit/test_templates.py)
4. ТЕСТЫ БЕЗОПАСНОСТИ (tests/security/test_security.py)

================================================================================
1. ТЕСТЫ ПРОИЗВОДИТЕЛЬНОСТИ
================================================================================

Расположение: tests/performance/test_performance.py
Зависимости: pytest-benchmark==4.0.0

ЦЕЛЬ:
- Измерение времени выполнения критических функций
- Выявление узких мест производительности
- Установление базовых метрик для мониторинга

ОСНОВНЫЕ ТЕСТЫ:

test_call_llm_performance:
- Измеряет время выполнения функции call_llm с моками
- Ожидаемое время: < 1 секунды
- Использует pytest-benchmark для точных измерений

test_index_route_performance:
- Измеряет время обработки POST-запроса на главную страницу
- Включает рендеринг шаблона и обработку формы
- Ожидаемое время: < 2 секунды

ЗАПУСК:
pytest tests/performance/test_performance.py -v --benchmark-only

================================================================================
2. ИНТЕГРАЦИОННЫЕ ТЕСТЫ С РЕАЛЬНЫМ API
================================================================================

Расположение: tests/integration/test_integration.py

ЦЕЛЬ:
- Проверка интеграции с реальным API AI-моделей
- Валидация end-to-end сценариев
- Тестирование в условиях, близких к production

ВНИМАНИЕ! Эти тесты используют реальный API и тратят токены!
Запускайте только в контролируемой среде с достаточным бюджетом.

ПРЕДВАРИТЕЛЬНЫЕ ТРЕБОВАНИЯ:
- Установлена переменная окружения API_KEY
- Доступ к интернету
- Бюджет на API вызовы

ОСНОВНЫЕ ТЕСТЫ:

test_call_llm_real_api_worker_model:
- Реальный вызов API для модели перевода
- Проверка корректности ответа

test_call_llm_real_api_judge_model:
- Реальный вызов API для модели оценки
- Проверка формата ответа

test_full_translation_workflow:
- Полный цикл: форма -> перевод -> оценка -> отображение
- Интеграционное тестирование всего приложения

test_environment_setup_check:
- Проверка корректности настройки среды

ЗАПУСК:
export API_KEY="ваш_api_ключ"
pytest tests/integration/test_integration.py -v -k "not skip"

================================================================================
3. ТЕСТЫ ШАБЛОНОВ HTML
================================================================================

Расположение: tests/unit/test_templates.py
Зависимости: beautifulsoup4==4.12.0

ЦЕЛЬ:
- Проверка корректности рендеринга HTML-шаблонов
- Валидация структуры страниц
- Тестирование отображения данных

ОСНОВНЫЕ ТЕСТЫ:

test_index_template_get_request:
- Проверка отображения формы на GET-запрос
- Валидация наличия всех полей ввода

test_index_template_post_request:
- Параметризованный тест отображения результатов
- Проверка корректности показа перевода и оценки

test_template_error_handling:
- Тестирование отображения сообщений об ошибках
- Проверка graceful degradation

test_template_structure:
- Валидация общей HTML-структуры
- Проверка наличия обязательных элементов

ЗАПУСК:
pytest tests/unit/test_templates.py -v

================================================================================
4. ТЕСТЫ БЕЗОПАСНОСТИ
================================================================================

Расположение: tests/security/test_security.py

ЦЕЛЬ:
- Проверка защиты от распространенных уязвимостей
- Валидация безопасной обработки ввода
- Тестирование security headers и конфиденциальности

ОСНОВНЫЕ ТЕСТЫ:

test_xss_prevention_in_form_input:
- Защита от Cross-Site Scripting (XSS)
- Проверка экранирования вредоносного JavaScript

test_sql_injection_prevention:
- Защита от SQL Injection (валидация ввода)
- Проверка обработки потенциально опасных строк

test_input_validation_length_limits:
- Валидация длинных вводов
- Проверка устойчивости к большим объемам данных

test_input_validation_empty_fields:
- Обработка пустых полей формы
- Проверка значений по умолчанию

test_security_headers:
- Проверка наличия базовых security headers
- Валидация Content-Type и других заголовков

test_api_key_security:
- Безопасность API ключа
- Проверка отсутствия утечек в логах/ошибках

ЗАПУСК:
pytest tests/security/test_security.py -v

================================================================================
ОБЩИЕ ИНСТРУКЦИИ ПО ЗАПУСКУ
================================================================================

1. УСТАНОВКА ЗАВИСИМОСТЕЙ:
pip install -r requirements.txt

2. ЗАПУСК ВСЕХ ДОПОЛНИТЕЛЬНЫХ ТЕСТОВ:
pytest tests/performance/ tests/integration/ tests/unit/test_templates.py tests/security/ -v

3. ЗАПУСК С ПОКРЫТИЕМ:
pytest tests/performance/ tests/unit/test_templates.py tests/security/ --cov=src --cov-report=html

4. ПРОФИЛИРОВАНИЕ ПРОИЗВОДИТЕЛЬНОСТИ:
pytest tests/performance/ --benchmark-histogram

================================================================================
РЕКОМЕНДАЦИИ ПО ИСПОЛЬЗОВАНИЮ
================================================================================

ПРОИЗВОДИТЕЛЬНОСТЬ:
- Запускайте регулярно для мониторинга degradation
- Устанавливайте базовые метрики после оптимизаций
- Используйте для сравнения разных реализаций

ИНТЕГРАЦИЯ:
- Запускайте в staging среде перед production
- Мониторьте расход API токенов
- Используйте для smoke testing новых версий API

ШАБЛОНЫ:
- Запускайте после изменений в HTML/CSS
- Используйте для регрессионного тестирования UI
- Полезны при рефакторинге шаблонов

БЕЗОПАСНОСТЬ:
- Запускайте при каждом релизе
- Добавляйте новые тесты при обнаружении уязвимостей
- Используйте как часть security audit

================================================================================
РАСШИРЕНИЕ ТЕСТОВОГО ПОКРЫТИЯ
================================================================================

ВОЗМОЖНЫЕ ДОБАВЛЕНИЯ:
- Load testing с использованием Locust или JMeter
- Accessibility testing (WCAG compliance)
- Cross-browser testing с Selenium
- API contract testing с Pact
- Chaos engineering для resilience testing

КОНТАКТЫ:
QA Automation Lead
Для вопросов по тестам и улучшениям качества.